#  -.-   Linux

It is just talking about some basic Linux instructions
___
### 常用指令

* ls命令

         ls -a 列出目录所有文件，包含以.开始的隐藏文件

         ls -A 列出除.及..的其它文件

         ls -r 反序排列

         ls -t 以文件修改时间排序

         ls -S 以文件大小排序

         ls -h 以易读大小显示

         ls -l 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来
         
         ls -d 仅列出目录本身，而不是列出目录内的文件数据
         
* cd命令

         cd /   进入目录
         
         cd ~   进入家(home)
         
         cd -   进入上次工作路径
         
         cd !$  把上个命令参数作为cd参数使用
         
* pwd命令

         pwd       查看当前路径
         
         pwd -p    查看软链接实际路径
         
* mkdir命令

         mkdir t    创建名为t的文件夹
         
         mkdir -p /tmp/test1/file1/t    在tmp目录下创建路径为/test1/file1/t 的目录，若不存在则创建,-p是递归创建的含义，表明不需要一层层创建
         
         mkdir -m 711 test2             -m表示自定义目录权限，711表示权限值

* rmdir命令

         rmdir [-p] filename             删除空目录，-p表示递归删除空目录

         
* rm命令--删除一个目录中的一个或多个文件或目录，rm后面没有-r选项，则不会删除目录，rm删除文件仍可恢复


         rm [选项] 文件
         
         rm -i *.log          删除log文件，删除前逐一询问确认
         
         rm -- -f*            删除f开头的文件
       
* mv命令

         mv test.log test1.txt         将第一个文件test.log重命名为test.txt
         
         mv test.log /test1            将test.log移动到test1目录下
         
         mv *../                       移动当前文件夹下的所有文件到上一级目录
         
* cp命令--将原文件复制到目标文件/目标目录
         
         cp a.txt test               将a.txt文件复制到test目录
         
         cp a.txt link_a.txt         将a.txt文件建立一个链接
         
* cat命令(more/less 看文件)

         cat filename                显示整个文件
         
         cat >file                   创建新文件
         
         cat file1 file2 >file       将几个文件合为一个文件
         
* head命令

         head test.txt -n 20         显示文件text.txt的前20行（-n表示显示行数，20表示多少行，如果为负数则表示从最后往前）
         
* tail命令

         tail -f file.log            查看日志
         
* which命令

         which ls/cd                 查看ls/cd命令是否存在，及存在的路径
         
* whereis命令

   > 常用参数：

    -b   定位可执行文件。

    -m   定位帮助文件。

    -s   定位源代码文件。

    -u   搜索默认路径下除可执行文件、源代码文件、帮助文件以外的其它文件。
         
         whereis <参数> filename
         
* locate命令-通过搜寻系统内建文档数据库达到快速找到档案

         locate -i /etc/sh              搜寻etc目录下所有以sh开头的文件,-i表示忽略大小写
         
* find命令

         find <指定目录> <指定条件> <指定动作>
         
         find . -name 'my*'             搜寻当前目录中文件名以my开头的文件
         
         find . -mmin 10                搜寻当前目录中，过去10mins更新过的所有文件和目录
         
* chmod命令

    >权限范围
  
     u ：目录或者文件的当前的用户

     g ：目录或者文件的当前的群组

     o ：除了目录或者文件的当前用户或群组之外的用户或者群组

     a ：所有的用户及群组
    
    >权限代号
   
     r ：读权限，用数字4表示

     w ：写权限，用数字2表示

     x ：执行权限，用数字1表示

     \- ：删除权限，用数字0表示

     s ：特殊权限

         chmod a+x test.txt           增加文件test.txt所有用户可执行权限
         
* tar命令--用来压缩和解压文件

   >常用参数：
   
     -c 建立新的压缩文件

     -f 指定压缩文件

     -r 添加文件到已经压缩文件包中

     -u 添加改了和现有的文件到压缩包中

     -x 从压缩包中抽取文件

     -t 显示压缩文件中的内容

     -z 支持gzip压缩

     -j 支持bzip2压缩

     -Z 支持compress解压文件

     -v 显示操作过程
     
         tar -cvf log.tar file1.log file2.log         将文件file1,file2压缩打包
         
         tar -ztvf /tmp/etc.tar.gz /etc               将/etc下所有文件和目录打包到指定目录，并用gz压缩
         
* df命令
    
         df -hl                 显示磁盘使用情况
         
* du命令

    >常用参数
    
     -a 显示目录中所有文件大小

     -k 以KB为单位显示文件大小

     -m 以MB为单位显示文件大小

     -g 以GB为单位显示文件大小

     -h 以易读方式显示文件大小

     -s 仅显示总计

     -c或--total  除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和

         du [选项][文件]
         
* date命令

    >命令参数
     
     -d<字符串>   显示字符串所指的日期和时间，字符串前后加双引号
     -s<字符串>   根据字符串设置日期与时间，字符串前后加双引号
     
         date -d next-day +%Y%m%d    明天的日期
         
         date -d "next monday"       下周一的日期
         
* grep命令

         grep [option] pattern file|dir              命令格式
         
   |选项    |含义                                           |
   |-------|-----------------------------------------------|
   |-c     |仅列出文件中包含模式的行数                         |
   |-i     |忽略模式中的字母大小写                            |
   |-l     |列出带有匹配行的文件名                             |
   |-n     |在每一行的最前面列出行号                           |
   |-v     |列出没有匹配模式的行                              |
   |-w     |把表达式当做一个完整的单字符来搜寻，忽略那些部分匹配的行|
         
* wc命令

         wc [option] file                            命令格式
         
         cat test.txt | wc -l                    统计输出结果的行数(-c:统计字节数；-l:统计行数;-m:统计字符数)
         
* ps命令

   >ps工具标识进程的5种状态码
     
     D 不可中断
     
     R 运行
     
     S 中断
     
     T 停止
     
     Z 僵死
     
     X 死掉的进程
     
    >命令参数
    
     -A 显示所有进程

     a 显示所有进程

     -a 显示同一终端下所有进程

     c 显示进程真实名称

     e 显示环境变量

     f 显示进程间的关系

     r 显示当前终端运行的进程
     
     -aux 显示所有包含其它使用的进程
     
         ps -aux | grep apache                          查找进程
         
* top命令

    >常用参数
   
     -c 显示完整的进程命令

     -s 保密模式

     -p <进程号> 指定进程显示

     -n <次数>循环显示次数
     
     -b 批次档模式，搭配‘n'使用，将top结果输出到档案内
     
         top -n 2 -b <top.log               将更新显示2次的结果输入到top.log档案里
         
* kill命令
    >常见参数
      
     -l 信号，若不加编号则会列出全部信号名称
      
     -a 当处理当前进程时，不限制命令名和进程号的对应关系
     
     -p 指定kill命令只打印相关进程的进程号
     
     -s 指定发送信号
     
     -u 指定用户
     
         kill -9 $(ps -ef | grep pro1)         先用ps查找进程pro1，然后kill杀掉
         
* free命令--显示系统内存使用情况

    >命令参数
    
     -b 以Byte显示内存使用情况

     -k 以kb为单位显示内存使用情况

     -m 以mb为单位显示内存使用情况

     -g 以gb为单位显示内存使用情况

     -s<间隔秒数> 持续显示内存

     -t 显示内存使用总合
     
         free -s 10                          每10s查询内存使用情况
         
     
* Linux权限位
 
 `常见文件权限有3种，读r,写w,执行x`
 
 `每行的第一列表示的就是各文件针对不同用户设定的权限，一共 11 位，但第 1 位用于表示文件的具体类型，最后一位此文件受 SELinux 的安全规则管理, 中间9位分为所有者权限3位，所属组权限3位，其他人权限3位`
 
 `r ----> 4`
 
 `w ----> 2`
 
 `x ----> 1`
 
 `所以：765  -----> rwxrw-r-x`

#####  或者
  
 `u  ---> 所有者`
 
 `g  ---> 所属组`
 
 `o  ---> 其他人`
 
 `a  ---> 全部身份`
 
 `所以 u=rwx,go=rx  ---> rwxr-xr-x     ===>    a+w ---> rwxrwxrwx`
 
##### SUID/SGID和SBIT

* SUID rwsrw-r-x - 4 - 对文件

`只有可执行文件才能设定 SetUID 权限，对目录设定 SUID，是无效的。`

`用户要对该文件拥有 x（执行）权限。`

`用户在执行该文件时，会以文件所有者的身份执行。`

`SetUID 权限只在文件执行过程中有效，一旦执行完毕，身份的切换也随之消失`

* SGID - 2 - 可以对文件/目录进行配置

`SGID 只针对可执行文件有效，换句话说，只有可执行文件才可以被赋予 SGID 权限，普通文件赋予 SGID 没有意义`

`用户需要对此可执行文件有 x 权限`

`用户在执行具有 SGID 权限的可执行文件时，用户的群组身份会变为文件所属群组`

`SGID 权限赋予用户改变组身份的效果，只在可执行文件运行过程中有效`

* SBIT  - 1 - 对目录

`SBIT 权限仅对目录有效，一旦目录设定了 SBIT 权限，则用户在此目录下创建的文件或目录，就只有自己和 root 才有权利修改或删除该文件`
 
>例如：4765表示具有SUID权限的rwsrw-r-x      
         
         
         


         
         
  
          
         

         
         
